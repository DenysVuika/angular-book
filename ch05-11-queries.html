<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Queries - Angular Book</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="title-page.html">The Angular Book</a></li><li class="chapter-item expanded affix "><a href="ch00-00-introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="ch01-00-prerequisites.html"><strong aria-hidden="true">1.</strong> Prerequisites</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch01-01-node.html"><strong aria-hidden="true">1.1.</strong> Node</a></li><li class="chapter-item expanded "><a href="ch01-02-vscode.html"><strong aria-hidden="true">1.2.</strong> Visual Studio Code</a></li></ol></li><li class="chapter-item expanded "><a href="ch02-00-es6.html"><strong aria-hidden="true">2.</strong> ES6</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch02-01-classes.html"><strong aria-hidden="true">2.1.</strong> Classes</a></li><li class="chapter-item expanded "><a href="ch02-02-inheritance.html"><strong aria-hidden="true">2.2.</strong> Inheritance</a></li><li class="chapter-item expanded "><a href="ch02-03-arrow-functions.html"><strong aria-hidden="true">2.3.</strong> Arrow Functions</a></li><li class="chapter-item expanded "><a href="ch02-04-template-literals.html"><strong aria-hidden="true">2.4.</strong> Template Literals</a></li><li class="chapter-item expanded "><a href="ch02-05-extended-parameters.html"><strong aria-hidden="true">2.5.</strong> Extended Parameter Handling</a></li><li class="chapter-item expanded "><a href="ch02-06-destructuring.html"><strong aria-hidden="true">2.6.</strong> Destructuring Assignment</a></li><li class="chapter-item expanded "><a href="ch02-07-modules.html"><strong aria-hidden="true">2.7.</strong> Modules</a></li><li class="chapter-item expanded "><a href="ch02-08-see-also.html"><strong aria-hidden="true">2.8.</strong> See Also</a></li></ol></li><li class="chapter-item expanded "><a href="ch03-00-typescript.html"><strong aria-hidden="true">3.</strong> TypeScript</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch03-01-getting-started.html"><strong aria-hidden="true">3.1.</strong> Getting Started</a></li><li class="chapter-item expanded "><a href="ch03-02-features.html"><strong aria-hidden="true">3.2.</strong> TypeScript Features</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch03-03-types.html"><strong aria-hidden="true">3.2.1.</strong> Types</a></li><li class="chapter-item expanded "><a href="ch03-04-classes.html"><strong aria-hidden="true">3.2.2.</strong> Classes</a></li><li class="chapter-item expanded "><a href="ch03-05-interfaces.html"><strong aria-hidden="true">3.2.3.</strong> Interfaces</a></li><li class="chapter-item expanded "><a href="ch03-06-abstract-classes.html"><strong aria-hidden="true">3.2.4.</strong> Abstract Classes</a></li><li class="chapter-item expanded "><a href="ch03-07-modules.html"><strong aria-hidden="true">3.2.5.</strong> Modules</a></li><li class="chapter-item expanded "><a href="ch03-08-decorators.html"><strong aria-hidden="true">3.2.6.</strong> Decorators</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="ch04-00-angular-cli.html"><strong aria-hidden="true">4.</strong> Angular CLI</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch04-01-installing.html"><strong aria-hidden="true">4.1.</strong> Installing</a></li><li class="chapter-item expanded "><a href="ch04-02-first-application.html"><strong aria-hidden="true">4.2.</strong> Your First Application</a></li><li class="chapter-item expanded "><a href="ch04-03-running-application.html"><strong aria-hidden="true">4.3.</strong> Running Application</a></li><li class="chapter-item expanded "><a href="ch04-04-linting.html"><strong aria-hidden="true">4.4.</strong> Code Linting</a></li><li class="chapter-item expanded "><a href="ch04-05-testing.html"><strong aria-hidden="true">4.5.</strong> Unit Tests</a></li><li class="chapter-item expanded "><a href="ch04-06-coverage.html"><strong aria-hidden="true">4.6.</strong> Code Coverage</a></li><li class="chapter-item expanded "><a href="ch04-07-development-and-production-builds.html"><strong aria-hidden="true">4.7.</strong> Development and Production Builds</a></li><li class="chapter-item expanded "><a href="ch04-08-using-blueprints.html"><strong aria-hidden="true">4.8.</strong> Using Blueprints</a></li><li class="chapter-item expanded "><a href="ch04-09-creating-modules.html"><strong aria-hidden="true">4.9.</strong> Creating Modules</a></li><li class="chapter-item expanded "><a href="ch04-10-routing-support.html"><strong aria-hidden="true">4.10.</strong> Routing Support</a></li><li class="chapter-item expanded "><a href="ch04-11-generating-standalone-scripts.html"><strong aria-hidden="true">4.11.</strong> Generating Standalone Scripts</a></li></ol></li><li class="chapter-item expanded "><a href="ch05-00-angular.html"><strong aria-hidden="true">5.</strong> Angular</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch05-01-components.html"><strong aria-hidden="true">5.1.</strong> Components</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch05-02-creating-a-simple-component.html"><strong aria-hidden="true">5.1.1.</strong> Creating a Simple Component</a></li><li class="chapter-item expanded "><a href="ch05-03-generating-components-with-angular-cli.html"><strong aria-hidden="true">5.1.2.</strong> Generating Components with Angular CLI</a></li><li class="chapter-item expanded "><a href="ch05-04-component-metadata.html"><strong aria-hidden="true">5.1.3.</strong> Component Metadata</a></li><li class="chapter-item expanded "><a href="ch05-05-templates.html"><strong aria-hidden="true">5.1.4.</strong> Templates</a></li><li class="chapter-item expanded "><a href="ch05-06-styles.html"><strong aria-hidden="true">5.1.5.</strong> Styles</a></li><li class="chapter-item expanded "><a href="ch05-07-input-properties.html"><strong aria-hidden="true">5.1.6.</strong> Input Properties</a></li><li class="chapter-item expanded "><a href="ch05-08-output-events.html"><strong aria-hidden="true">5.1.7.</strong> Output Events</a></li><li class="chapter-item expanded "><a href="ch05-09-providers.html"><strong aria-hidden="true">5.1.8.</strong> Providers</a></li><li class="chapter-item expanded "><a href="ch05-10-host.html"><strong aria-hidden="true">5.1.9.</strong> Host</a></li><li class="chapter-item expanded "><a href="ch05-11-queries.html" class="active"><strong aria-hidden="true">5.1.10.</strong> Queries</a></li><li class="chapter-item expanded "><a href="ch05-12-component-lifecycle.html"><strong aria-hidden="true">5.1.11.</strong> Component Lifecycle</a></li><li class="chapter-item expanded "><a href="ch05-13-content-projection.html"><strong aria-hidden="true">5.1.12.</strong> Content Projection</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.2.</strong> Dependency Injection</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.2.1.</strong> Preparing a Project</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.2.2.</strong> Services</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.2.3.</strong> Providers</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.2.4.</strong> Injecting Multiple Instances</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.2.5.</strong> Optional Dependencies</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.2.6.</strong> Manual Injection with ReflectiveInjector</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.2.7.</strong> Summary</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.3.</strong> Events</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.3.1.</strong> Component Events</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.3.2.</strong> DOM Events</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.3.3.</strong> Service Events</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.4.</strong> Directives</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.4.1.</strong> Introduction to Directives</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.4.2.</strong> Attribute Directives</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.4.3.</strong> Structural Directives</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.4.4.</strong> Modifying Host Element Layout</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.5.</strong> Walkthrough: Upload Directive</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.</strong> Pipes</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.1.</strong> Introduction to Pipes</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.</strong> Pipes with Parameters</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.3.</strong> Chaining Pipes</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.4.</strong> Built-in Pipes</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.5.</strong> Custom Pipes</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.6.</strong> Pure And Impure Pipes</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.7.</strong> Global Application Configuration</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.7.1.</strong> Preparing the Configuration File</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.7.2.</strong> Creating the Configuration Service</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.7.3.</strong> Loading Server-Side Configuration File</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.7.4.</strong> Registering Configuration Service</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.7.5.</strong> Using Configuration Settings</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.8.</strong> Internationalisation (i18n)</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.8.1.</strong> Creating Translate Service</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.8.2.</strong> Creating Translate Pipe</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.8.3.</strong> Using Translate Pipe</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.8.4.</strong> Switching Languages</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.8.5.</strong> Summary</div></li></ol></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> Reusable Component Libraries</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">6.1.</strong> Creating new application</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.2.</strong> Creating component libraries</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.3.</strong> Building the packages</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.4.</strong> Publishing to NPM</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.5.</strong> See also</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.</strong> Advanced Angular</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">7.1.</strong> Dynamic Content in Angular</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.</strong> Using with Docker</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">8.1.</strong> Additional Resources</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.2.</strong> Preparing new project</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.3.</strong> Creating Dockerfile</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.4.</strong> Testing in a container</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.5.</strong> Creating docker-compose.yml</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.6.</strong> Consuming from Docker Hub</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.7.</strong> Automating with Travis</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.8.</strong> See also</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.</strong> Webpack</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">9.1.</strong> Initial project structure</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.2.</strong> Typescript configuration</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.3.</strong> Basic webpack setup</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.4.</strong> Advanced webpack setup</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.5.</strong> Unit testing</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.</strong> Building a Mobile App with Cordova and Angular</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">10.1.</strong> Installing command-line tools</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.2.</strong> Generating a new Angular App</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.3.</strong> Routing support</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.4.</strong> Summary</div></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Angular Book</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        <a href="https://github.com/DenysVuika/angular-book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="queries"><a class="header" href="#queries">Queries</a></h2>
<p>There may be scenarios when you need accessing child components from your current component that contains them.
That becomes useful when you need calling public methods or change properties of the children.</p>
<blockquote>
<p><strong>Source code</strong></p>
<p>You can find the source code as an Angular CLI project in the <strong><a href="https://github.com/DenysVuika/developing-with-angular/tree/master/angular/components/component-queries">angular/components/component-queries</a></strong> folder.</p>
</blockquote>
<h3 id="preparing-the-project"><a class="header" href="#preparing-the-project">Preparing the Project</a></h3>
<p>Let's start by creating a new Angular project with the help of Angular CLI, and creating two components <code>List</code> and <code>ListItem</code> to experiment.</p>
<pre><code class="language-sh">ng g component list
ng g component list-item
</code></pre>
<p>Extend the generated List component with an extra property <code>title</code> marked with the <code>@Input</code> decorator.</p>
<pre><code class="language-ts">// src/app/list/list.component.ts

import { /*...,*/ Input } from '@angular/core';

@Component({/*...*/})
export class ListComponent implements OnInit {

  @Input()
  title = 'List Title';

  // ...
}
</code></pre>
<p>Next, update the component HTML template to display the <code>title</code> value,
and also the <code>ng-content</code> component to render any other components or HTML elements the end developers provide:</p>
<pre><code class="language-html">&lt;!-- src/app/list/list.component.html --&gt;

&lt;div&gt;{{ title }} &lt;/div&gt;
&lt;ng-content&gt;&lt;/ng-content&gt;
</code></pre>
<p>Now you can declare a List element in the main application component template, and also put several ListItem components inside its tags:</p>
<pre><code class="language-html">&lt;!-- src/app/app.component.html --&gt;

&lt;app-list&gt;
  &lt;app-list-item&gt;&lt;/app-list-item&gt;
  &lt;app-list-item&gt;&lt;/app-list-item&gt;
  &lt;app-list-item&gt;&lt;/app-list-item&gt;
&lt;/app-list&gt;
</code></pre>
<p>At runtime, the code above should give you the following output on the main page:</p>
<p><img src="images/component-queries-01.png" alt="" /></p>
<h3 id="viewchild"><a class="header" href="#viewchild">@ViewChild</a></h3>
<p>The <code>@ViewChild</code> decorator allows you to retrieve and reference the component or directive from the current component View.</p>
<p>For example, the main application component can gain access to the List component we have defined in its HTML template,
and modify properties of the component instance from the code.</p>
<p>To do that we need to use a <code>@ViewChild</code> decorator with the target type.</p>
<p>You can access the property decorated with the <code>@ViewChild</code> only after component's View initializes.
The <code>AfterViewInit</code> interface and corresponding method is the most appropriate place for that.</p>
<pre><code class="language-ts">// src/app/app.component.ts

import { /*...,*/ ViewChild, AfterViewInit } from '@angular/core';
import { ListComponent } from './list/list.component';

@Component({...})
export class AppComponent implements AfterViewInit {

  @ViewChild(ListComponent)
  list: ListComponent;

  ngAfterViewInit() {
    this.list.title = 'custom list title';
  }
}
</code></pre>
<p>In the code snippet above, we change the title of the child List component from code.
Switch to the browser running your application, and you should see the following:</p>
<p><img src="images/component-queries-02.png" alt="" /></p>
<p>The component query is not limited to the target type reference.
You can also use local references and use string identifiers, for example, mark the List with the &quot;myList&quot; id:</p>
<pre><code class="language-html">&lt;!-- src/app/app.component.html --&gt;

&lt;app-list #myList&gt;
  &lt;!-- ... --&gt;
&lt;/app-list&gt;
</code></pre>
<p>Now you can use this id with the <code>@ViewChild</code> decorator if needed:</p>
<pre><code class="language-ts">// src/app/app.component.ts

@Component({/*...*/})
export class AppComponent implements AfterViewInit {

  @ViewChild('myList')
  list: ListComponent;

  // ...
}
</code></pre>
<h3 id="viewchildren"><a class="header" href="#viewchildren">@ViewChildren</a></h3>
<p>If you declare more than one List component, you should notice that every time only the first instance is fetched.
To get a reference to all the child instances of the particular component type you need to use a <code>@ViewChildren</code> decorator.</p>
<p>Let's have two List components separated by a horizontal line like in the example below:</p>
<pre><code class="language-html">&lt;!-- src/app/app.component.html --&gt;

&lt;app-list&gt;
  &lt;app-list-item&gt;&lt;/app-list-item&gt;
  &lt;app-list-item&gt;&lt;/app-list-item&gt;
  &lt;app-list-item&gt;&lt;/app-list-item&gt;
&lt;/app-list&gt;

&lt;hr&gt;

&lt;app-list&gt;
  &lt;app-list-item&gt;&lt;/app-list-item&gt;
  &lt;app-list-item&gt;&lt;/app-list-item&gt;
  &lt;app-list-item&gt;&lt;/app-list-item&gt;
&lt;/app-list&gt;
</code></pre>
<p>Now create a <code>lists</code> property in the underlying component class to reference all &quot;ListComponent&quot; instances after View gets initialized:</p>
<pre><code class="language-ts">// src/app/app.component.ts

import { /*...,*/ QueryList, ViewChildren } from '@angular/core';
import { ListComponent } from './list/list.component';

@Component({/*...*/})
export class AppComponent implements AfterViewInit {

  @ViewChild(ListComponent)
  list: ListComponent;

  @ViewChildren(ListComponent)
  lists: QueryList&lt;ListComponent&gt;;

  // ...
}
</code></pre>
<p>For the next step, we are going to update the <code>title</code> property of every List component in the View:</p>
<pre><code class="language-ts">// src/app/app.component.ts

import { /*...,*/ AfterViewInit, QueryList, ViewChildren } from '@angular/core';
import { ListComponent } from './list/list.component';

@Component({/*...*/})
export class AppComponent implements AfterViewInit {
  // ...

  @ViewChildren(ListComponent)
  lists: QueryList&lt;ListComponent&gt;;

  ngAfterViewInit() {
    let i = 0;
    this.lists.forEach(l =&gt; {
      l.title = 'Custom title #' + (i++);
    });
  }
}
</code></pre>
<p>Switch back to the browser and once the application compiles and restarts you should see the following:</p>
<p><img src="images/component-queries-03.png" alt="ViewChildren Queries" /></p>
<h3 id="contentchild"><a class="header" href="#contentchild">@ContentChild</a></h3>
<p>The <code>@ViewChild</code> provides access only to components and directives that are part of the view but not inside the <code>ng-content</code> tags.
You need to use <code>@ContentChild</code> decorator to work with the elements inside <code>ng-content</code> container.</p>
<p>If you remember, the List component template already features the <code>ng-template</code>:</p>
<pre><code class="language-html">&lt;!-- src/app/list/list.component.html --&gt;

&lt;div&gt;{{ title }} &lt;/div&gt;
&lt;ng-content&gt;&lt;/ng-content&gt;
</code></pre>
<p>Update the ListItemComponent component class with the &quot;title&quot; property like in the following example:</p>
<pre><code class="language-ts">// src/app/list-item/list-item.component.ts
// ...

@Component({/*...*/})
export class ListItemComponent {

  title = 'list-item works!';

}
</code></pre>
<p>For the sake of simplicity just replace the content of the ListItem component template with the next block of HTML:</p>
<pre><code class="language-html">&lt;!-- src/app/list-item/list-item.component.html --&gt;

&lt;p&gt;
  {{ title }}
&lt;/p&gt;
</code></pre>
<p>For a start, let's access the very first entry of the List content collection
by introducing a <code>firstListItem</code> property decorated with the <code>@ContentChild</code>.</p>
<p>As soon as component content gets initialized, we are going to update the title of the referenced item.</p>
<pre><code class="language-ts">// src/app/list/list.component.ts

import { /*...,*/ ContentChild, AfterContentInit } from '@angular/core';
import { ListItemComponent } from '../list-item/list-item.component';

@Component({/*...*/})
export class ListComponent implements AfterContentInit {
  ...

  @ContentChild(ListItemComponent)
  firstListItem: ListItemComponent;

  ngAfterContentInit() {
    this.firstListItem.title = 'first item';
  }
}
</code></pre>
<p>Note that your component now needs to implement the <code>AfterContentInit</code> interface
and have the corresponding <code>ngAfterContentInit</code> method implementation.
That is the most recommended place to work with the elements provided using the <code>@ContentChild</code> decorator.</p>
<p>Switch to the browser, and you should now look the following on the main page:</p>
<p><img src="images/component-queries-04.png" alt="ContentChild Query" /></p>
<h3 id="contentchildren"><a class="header" href="#contentchildren">@ContentChildren</a></h3>
<p>Similar to the <code>@ViewChild</code>, the <code>@ContentChild</code> decorator always returns the first found element
if there are more than one declared in the Component View.</p>
<p>You are going to need a <code>@ContentChildren</code> decorator if you intend working with all the instances.</p>
<pre><code class="language-ts">// src/app/list/list.component.ts

import { /*...,*/ ContentChildren, QueryList } from '@angular/core';
import { ListItemComponent } from '../list-item/list-item.component';

@Component({/*...*/})
export class ListComponent implements AfterContentInit {
  // ...

  @ContentChildren(ListItemComponent)
  listItems: QueryList&lt;ListItemComponent&gt;;

  ngAfterContentInit() {
    this.listItems.forEach(item =&gt; {
      item.title = item.title + ' (' + new Date().toLocaleDateString() + ')';
    });
  }
}
</code></pre>
<p>The example above should already be familiar to you.
We have just updated every item in the list by changing its title.
The main page in the browser should be looking similar to the following one:</p>
<p><img src="images/component-queries-05.png" alt="ContentChildren Query" /></p>
<h3 id="listening-for-view-and-content-changes"><a class="header" href="#listening-for-view-and-content-changes">Listening for View and Content Changes</a></h3>
<p>So with <code>@ContentChild</code>, <code>@ContentChildren</code>, <code>@ViewChild</code> and <code>@ViewChildren</code> decorators we can import
and manipulate elements and components in the controller class.</p>
<p>But what if developer applies conditional visibility to the layout entries like in the example below?</p>
<pre><code class="language-html">&lt;app-list&gt;
  &lt;app-list-item *ngIf=&quot;showFirstItem&quot;&gt;&lt;/app-list-item&gt;
  &lt;app-list-item&gt;&lt;/app-list-item&gt;
  &lt;app-list-item&gt;&lt;/app-list-item&gt;
&lt;/app-list&gt;
</code></pre>
<p>As we already know, based on the &quot;ngIf state&quot;, the Angular will remove a corresponding element from the DOM, or add it back.
There are many scenarios, however, when your component controller needs to know about such changes.
For example, imagine a &quot;DataTable&quot; component that uses child components to define column structure,
but then turns developer-defined view or content elements to some internal representation.
The component must always know what is the &quot;visible&quot; part of the layout to work with.</p>
<p>Let's now extend our previous &quot;ViewChildren&quot; example with an extra flag to toggle visibility of the first list entry.
We will add a &quot;showFirstItem&quot; property, and a button that changes the property value on each click.</p>
<pre><code class="language-ts">// src/app/app.component.ts

export class AppComponent implements AfterViewInit {

  showFirstItem = true;

  // ...
}
</code></pre>
<p>Next, append the following block to the component template:</p>
<pre><code class="language-html">&lt;!-- src/app/app.component.html --&gt;

&lt;hr&gt;

&lt;button (click)=&quot;showFirstItem = !showFirstItem&quot;&gt;
  Toggle first item
&lt;/button&gt;
</code></pre>
<p>We have declared two List components in the previous examples.
Let's now wire the first entry of each of the components with the <code>showFirstItem</code> condition like in the example below:</p>
<pre><code class="language-html">&lt;!-- src/app/app.component.html --&gt;

&lt;app-list&gt;
  &lt;app-list-item *ngIf=&quot;showFirstItem&quot;&gt;&lt;/app-list-item&gt;
  &lt;app-list-item&gt;&lt;/app-list-item&gt;
  &lt;app-list-item&gt;&lt;/app-list-item&gt;
&lt;/app-list&gt;

&lt;hr&gt;

&lt;app-list&gt;
  &lt;app-list-item *ngIf=&quot;showFirstItem&quot;&gt;&lt;/app-list-item&gt;
  &lt;app-list-item&gt;&lt;/app-list-item&gt;
  &lt;app-list-item&gt;&lt;/app-list-item&gt;
&lt;/app-list&gt;

&lt;hr&gt;

&lt;button (click)=&quot;showFirstItem = !showFirstItem&quot;&gt;
  Toggle first item
&lt;/button&gt;
</code></pre>
<p>If you run the application now, you will see every first item appear and disappear from the list each time you click the &quot;Toggle first item&quot; buttons.
We have just emulated the situation when layout changes based on the external criteria.
But how does the component now react on those changes?</p>
<p>The &quot;QueryList&quot; class exposes a special &quot;changes&quot; property of the <code>Observable&lt;any&gt;</code>
type that can help us watch for the layout changes and achieve the desired behavior.</p>
<p>Now you can update the ListComponent implementation and add a simple change tracking code like in the following example:</p>
<pre><code class="language-ts">// src/app/list/list.component.ts

@Component({/*...*/})
export class ListComponent implements AfterContentInit {

  // ...

  ngAfterContentInit() {
    // ...

    this.listItems.changes.subscribe(() =&gt; {
      console.log(
        `List content changed and has now ${this.listItems.length} items.`
      );
    });
  }
}
</code></pre>
<p>Please run the application once again and click the &quot;Toggle first item&quot; button a few times.
Alongside the element being added to and removed from the page, you will see the following console output:</p>
<pre><code class="language-text">List content changed and has now 2 items.
List content changed and has now 2 items.
List content changed and has now 3 items.
List content changed and has now 3 items.
List content changed and has now 2 items.
List content changed and has now 2 items.
</code></pre>
<p>We have two instances of the ListComponent declared in the application component template.
And both lists have its first element wired with conditional visibility expression.
That is why you will see messages from both components in the browser console output window.</p>
<p>As you can see, subscribing and listening to <code>QueryList&lt;T&gt;.change</code> events gives you an ability
to react on layout changes and perform extra behaviors at the component level.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="ch05-10-host.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="ch05-12-component-lifecycle.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="ch05-10-host.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="ch05-12-component-lifecycle.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        
        <!-- Google Analytics Tag -->
        <script type="text/javascript">
            var localAddrs = ["localhost", "127.0.0.1", ""];

            // make sure we don't activate google analytics if the developer is
            // inspecting the book locally...
            if (localAddrs.indexOf(document.location.hostname) === -1) {
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

                ga('create', 'G-23X2CQXZ48', 'auto');
                ga('send', 'pageview');
            }
        </script>
        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
